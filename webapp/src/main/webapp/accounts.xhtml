<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Comptes</title>
</h:head>

<h:body>

    <h:form>

        <h2>Comptes bancaires</h2>

        <!-- Bouton créer -->
        <h:commandButton value="Créer un compte"
                         action="#{accountBean.startCreation}" />

        <!-- Sélecteur affiché seulement quand showTypeSelector = true -->
        <h:panelGroup rendered="#{accountBean.showTypeSelector}">
            <h3>Choisir le type :</h3>

            <h:selectOneMenu value="#{accountBean.selectedType}">
                <f:selectItem itemValue="Courant" itemLabel="Compte courant" />
                <f:selectItem itemValue="Épargne" itemLabel="Compte épargne" />
            </h:selectOneMenu>

            <br/><br/>

            <h:commandButton value="Créer" action="#{accountBean.createAccount}" />
            <h:commandButton value="Annuler" action="#{accountBean.setShowTypeSelector(false)}" />
        </h:panelGroup>

        <hr/>

        <!-- Liste des comptes -->
        <h:dataTable value="#{accountBean.accounts}" var="c">

            <h:column>
                <f:facet name="header">Type</f:facet>
                #{c.type}
            </h:column>

            <h:column>
                <f:facet name="header">Numéro</f:facet>
                #{c.number}
            </h:column>

            <h:column>
                <f:facet name="header">Solde</f:facet>
                #{c.balance} CHF
            </h:column>

            <h:column>
                <h:commandButton value="Détails"
                                 action="#{accountBean.openDetails(c.id)}" />
            </h:column>

        </h:dataTable>

    </h:form>

</h:body>
</html>